@page "/DailyPage/{DateString}"
@using Planner.Models.Repositories
@using Planner.Models.Tasks
@inject ILocalRepository<PlannerTask> taskStore;
<h3>Daily Page for @DateString </h3>
<table>
    <tr>
        <th>Check</th>
        <th>Priority</th>
        <th>Task</th>
    </tr>
    @if (tasks != null)
    @foreach (var task in tasks)
    {
        <tr>
            <td>X</td>
            <td>@task.PriorityDisplay</td>
            <td>@task.Name</td>
        </tr>
   }

</table>

@code {

    [Parameter]
    public string DateString { get; set; }

    private IListPendingCompletion<PlannerTask>? tasks;
    
    protected override Task OnInitializedAsync() => 
        taskStore.TryItemsForDate(DateString, out tasks) ?
        tasks.CompleteList() : Task.CompletedTask;

}